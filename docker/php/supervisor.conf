[program:queue-worker]
# Uses APP_PRIMARY project directory; ensure it exists and has artisan
environment=APP_ENV=local
directory=/var/www/html/%(ENV_APP_PRIMARY)s
command=php artisan queue:work --sleep=1 --tries=3 --queue=hadefault
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
priority=20

[program:scheduler]
environment=APP_ENV=local
directory=/var/www/html/%(ENV_APP_PRIMARY)s
command=sh -c 'while true; do php artisan schedule:run --verbose --no-interaction; sleep 60; done'
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
priority=30

[program:queue-worker-project-b]
# Uses APP_PRIMARY project directory; ensure it exists and has artisan
environment=APP_ENV=local
directory=/var/www/html/project-b
command=php artisan queue:work --sleep=1 --tries=3 --queue=default,low
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
priority=20


[program:scheduler-project-b]
environment=APP_ENV=local
directory=/var/www/html/project-b
command=sh -c 'while true; do php artisan schedule:run --verbose --no-interaction; sleep 60; done'
autostart=true
autorestart=true
startsecs=5
stopasgroup=true
killasgroup=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
priority=30
